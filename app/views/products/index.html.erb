<%- model_class = Product -%>

<div class="container-fluid" style="margin-bottom: 20px">
  <div class="col-md-3" >
    <% Category.all.each do |category|%>
    <label>
      <input type="checkbox" value="<%=category.id%>" class="category-filter-check", class="the_slider"> <%=category.name%>

    </label><br>
    <%end%>

  </div>

  <div class="col-md-9" id="categories">
    <% @products.each do |product| %>
    <!-- <div id="horizontalTab"> -->
    <!--  <ul class="resp-tabs-list"> -->
    <!-- <div> -->
    <div class="col-md-4 product-men">
      <%= link_to product_path(product) do %>
      <div class="men-pro-item simpleCart_shelfItem">
        <div class="men-thumb-item">
          <%= image_tag product.images.first.image.url if product.images.present? %>
        </div>
        <% end %>
        <div class="item-info-product ">
          <h4><%=link_to product.name, product_path(product) %></h4>
          <div class="info-product-price">
            <span class="item_price">â‚¹<%= product.price %></span>
          </div>
        </div>
      </div>
    </div>
    <!-- </div> -->
    <!-- </ul> -->
    <!-- </div> -->
    <% end %>
  </div>
</div>
<script type="text/javascript">
  // $(document).ready(function() {
  //   $('.category-filter-check').change(function() {
  //     if ($(this).is(':checked')) {
  //       alert($(this).data('value'));
  //       var categoryId = $(this).data('value');
  //       $.ajax({
  //         url: '/products/filtered_products',
  //         method: 'GET',
  //         data: { category_id: categoryId }
  //       });
  //     }
  //   });
  // });


  $(".category-filter-check").click(function(event){
    var categoryId = $(" input:checkbox:checked").map(function(){
      return $(this).val();
    }).get();
    console.log(categoryId);
    $.ajax({
      url: '/products/filtered_products',
      method: 'GET',
      data: { category_id: categoryId }

    });
  });
</script>
